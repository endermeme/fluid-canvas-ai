{
    "candidates": [
        {
            "content": {
                "parts": [
                    {
                        "text": "Chắc chắn rồi, đây là mã HTML, CSS và JavaScript cho một trò chơi vòng quay may mắn đơn giản, tất cả được chứa trong một tệp HTML duy nhất.\n\nTạo một tệp mới, ví dụ: `lucky_wheel.html`, và dán toàn bộ mã dưới đây vào đó.\n\n```html\n<!DOCTYPE html>\n<html lang=\"vi\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Vòng Quay May Mắn</title>\n    <style>\n        body {\n            font-family: 'Arial', sans-serif;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: 100vh;\n            background-color: #f4f4f4;\n            margin: 0;\n            overflow: hidden; /* Prevent overflow during spin */\n        }\n\n        .container {\n            text-align: center;\n            padding: 20px;\n            background-color: #fff;\n            border-radius: 10px;\n            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n        }\n\n        .wheel-container {\n            position: relative;\n            width: 300px;\n            height: 300px;\n            margin: 20px auto;\n        }\n\n        .wheel {\n            width: 100%;\n            height: 100%;\n            border-radius: 50%;\n            border: 5px solid #ddd;\n            position: relative;\n            overflow: hidden;\n            transition: transform 5s cubic-bezier(0.25, 0.1, 0.25, 1); /* Smooth transition */\n            background: conic-gradient(\n                /* This will be filled by JS */\n            );\n        }\n\n        .wheel::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 50%;\n            width: 0;\n            height: 0;\n            border-left: 15px solid transparent;\n            border-right: 15px solid transparent;\n            border-top: 30px solid red; /* Pointer color */\n            transform: translateX(-50%);\n            z-index: 2;\n        }\n\n        .segment-text {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%) rotate(calc(var(--angle) * 1deg));\n            transform-origin: 50% 50%; /* Rotate around center */\n            width: 50%; /* Covers half the wheel radius */\n            height: 100%; /* Height doesn't really matter here, just positioning */\n            display: flex;\n            justify-content: center;\n            align-items: flex-start; /* Align text towards the outer edge */\n            padding-top: 20px; /* Space from center */\n            box-sizing: border-box;\n        }\n\n        .segment-text span {\n            display: block;\n            transform: rotate(90deg); /* Orient text radially */\n            font-size: 14px;\n            font-weight: bold;\n            color: #fff; /* Default text color */\n            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);\n            white-space: nowrap; /* Prevent text wrapping */\n            overflow: hidden;\n            text-overflow: ellipsis;\n            max-width: 80px; /* Limit text width if needed */\n        }\n\n        /* Optional: Specific text colors based on segment index or type */\n         .segment-text:nth-child(odd) span {\n             color: #333; /* Example: dark text on light segments */\n         }\n         .segment-text:nth-child(even) span {\n             color: #fff; /* Example: light text on dark segments */\n         }\n\n\n        button {\n            margin-top: 20px;\n            padding: 10px 20px;\n            font-size: 18px;\n            cursor: pointer;\n            background-color: #4CAF50;\n            color: white;\n            border: none;\n            border-radius: 5px;\n            transition: background-color 0.3s ease;\n        }\n\n        button:hover:not(:disabled) {\n            background-color: #45a049;\n        }\n\n        button:disabled {\n            background-color: #ccc;\n            cursor: not-allowed;\n        }\n\n        #result {\n            margin-top: 20px;\n            font-size: 20px;\n            font-weight: bold;\n            color: #333;\n        }\n    </style>\n</head>\n<body>\n\n    <div class=\"container\">\n        <h1>Vòng Quay May Mắn</h1>\n        <div class=\"wheel-container\">\n            <div class=\"wheel\">\n                <!-- Segment text elements will be added by JS -->\n            </div>\n        </div>\n        <button id=\"spinButton\">Quay!</button>\n        <div id=\"result\">-</div>\n    </div>\n\n    <script>\n        const wheel = document.querySelector('.wheel');\n        const spinButton = document.getElementById('spinButton');\n        const resultDiv = document.getElementById('result');\n\n        // Danh sách các phần thưởng (mỗi phần tử là một segment)\n        // Thêm hoặc bớt các phần tử ở đây\n        const prizes = [\n            \"Chúc bạn may mắn lần sau\",\n            \"Giảm giá 10%\",\n            \"Miễn phí vận chuyển\",\n            \"Quà tặng bí mật\",\n            \"Thêm lượt quay\",\n            \"Giảm giá 20%\",\n            \"Voucher 50k\",\n            \"Trúng iPhone 15!\" // Cần may mắn lắm nhé :)\n        ];\n\n        const numSegments = prizes.length;\n        const degPerSegment = 360 / numSegments;\n        let totalRotation = 0; // Total degrees rotated\n        let spinning = false; // Flag to prevent multiple spins at once\n\n        // Colors for conic gradient (alternating)\n        const segmentColors = [\n            '#FFEB3B', // Yellow\n            '#F44336', // Red\n            '#2196F3', // Blue\n            '#4CAF50', // Green\n            '#FF9800', // Orange\n            '#9C27B0', // Purple\n            '#795548', // Brown\n            '#E91E63'  // Pink\n        ];\n\n        // Function to generate the conic gradient background\n        function generateConicGradient() {\n            let gradient = 'conic-gradient(';\n            for (let i = 0; i < numSegments; i++) {\n                const startAngle = i * degPerSegment;\n                const endAngle = (i + 1) * degPerSegment;\n                const color = segmentColors[i % segmentColors.length];\n                gradient += `${color} ${startAngle}deg ${endAngle}deg`;\n                if (i < numSegments - 1) {\n                    gradient += ', ';\n                }\n            }\n            gradient += ')';\n            wheel.style.background = gradient;\n        }\n\n        // Function to add text labels to segments\n        function addSegmentText() {\n            prizes.forEach((prize, index) => {\n                const textContainer = document.createElement('div');\n                textContainer.classList.add('segment-text');\n                // Calculate angle for text: middle of the segment\n                const textAngle = index * degPerSegment + degPerSegment / 2;\n                textContainer.style.setProperty('--angle', textAngle);\n\n                const span = document.createElement('span');\n                span.textContent = prize;\n                textContainer.appendChild(span);\n                wheel.appendChild(textContainer);\n            });\n        }\n\n        // Initialize wheel appearance and text\n        generateConicGradient();\n        addSegmentText();\n\n\n        // Function to spin the wheel\n        function spinWheel() {\n            if (spinning) return; // Prevent spinning if already spinning\n            spinning = true;\n            spinButton.disabled = true;\n            resultDiv.textContent = '-'; // Reset result display\n\n            // Select a random winning segment index\n            const randomIndex = Math.floor(Math.random() * numSegments);\n            const winningPrize = prizes[randomIndex];\n\n            // Calculate the target rotation angle\n            // We want the pointer (at the top, 0 degrees) to land in the middle\n            // of the winning segment.\n            // Segments are indexed 0 to numSegments-1, starting from the top and going clockwise.\n            // Segment 0 is from 0 to degPerSegment.\n            // Segment i is from i*degPerSegment to (i+1)*degPerSegment.\n            // The middle of segment i is at i*degPerSegment + degPerSegment / 2.\n            // To make this angle point to the top (0 degrees) with clockwise rotation,\n            // the wheel needs to rotate by 360 - (i*degPerSegment + degPerSegment / 2).\n            // We add multiple full spins for effect.\n            const minSpins = 5; // Ensure at least 5 full spins\n            let targetAngle = 360 - (randomIndex * degPerSegment + degPerSegment / 2);\n\n            // Add randomness within the winning segment (optional)\n            // This makes it not always stop exactly in the middle\n            // Random offset between -degPerSegment/2 * 0.8 and +degPerSegment/2 * 0.8\n            targetAngle += (Math.random() - 0.5) * (degPerSegment * 0.8);\n\n            // Ensure minimum spins and add to the total rotation\n            totalRotation += (minSpins * 360) + targetAngle;\n\n            // Apply the rotation\n            wheel.style.transform = `rotate(${totalRotation}deg)`;\n\n            // Store the winning index to display later\n            wheel.dataset.winningIndex = randomIndex;\n        }\n\n        // Event listener for when the spin animation ends\n        wheel.addEventListener('transitionend', () => {\n            spinning = false;\n            spinButton.disabled = false;\n\n            const winningIndex = parseInt(wheel.dataset.winningIndex, 10);\n            const winningPrize = prizes[winningIndex];\n            resultDiv.textContent = `Chúc mừng! Bạn đã trúng: ${winningPrize}`;\n        });\n\n        // Add event listener to the button\n        spinButton.addEventListener('click', spinWheel);\n\n        // Initial state message\n        resultDiv.textContent = 'Nhấn \"Quay!\" để thử vận may';\n\n    </script>\n\n</body>\n</html>\n```\n\n**Cách sử dụng:**\n\n1.  Lưu đoạn mã trên vào một tệp có đuôi `.html` (ví dụ: `lucky_wheel.html`).\n2.  Mở tệp đó bằng trình duyệt web của bạn (Chrome, Firefox, Edge, v.v.).\n\n**Giải thích mã:**\n\n1.  **HTML (`<body>`):**\n    *   Tạo một container chính để căn giữa nội dung.\n    *   `wheel-container`: Chứa vòng quay và con trỏ. Dùng `position: relative`.\n    *   `wheel`: Element hình tròn chính sẽ quay. Có `border-radius: 50%`, `position: relative`, và quan trọng là `transition` cho thuộc tính `transform` để tạo hiệu ứng quay mượt mà. Background `conic-gradient` được tạo bởi JavaScript để chia màu các phần.\n    *   Con trỏ: Sử dụng pseudo-element `::before` trên `.wheel` để tạo hình tam giác màu đỏ cố định ở phía trên.\n    *   `segment-text`: Các `div` sẽ chứa chữ của từng phần thưởng. Chúng được thêm vào bởi JavaScript, dùng `position: absolute` và `transform: rotate` để đặt đúng vị trí góc trên vòng quay. Biến CSS tùy chỉnh `--angle` được dùng để truyền góc quay cho từng text.\n    *   `spinButton`: Nút để bắt đầu quay.\n    *   `result`: `div` để hiển thị kết quả sau khi quay xong.\n\n2.  **CSS (`<style>`):**\n    *   Định dạng cơ bản cho body, container, nút.\n    *   Style cho `.wheel`, `.wheel-container`, và pseudo-element `::before` (con trỏ).\n    *   Style cho `.segment-text` và `.segment-text span` để định vị và xoay chữ sao cho chúng hướng ra ngoài từ tâm vòng quay.\n\n3.  **JavaScript (`<script>`):**\n    *   Lấy các element DOM cần thiết.\n    *   `prizes`: Mảng chứa tên các phần thưởng. Bạn có thể chỉnh sửa mảng này để thay đổi các giải thưởng.\n    *   Tính toán `numSegments` (số lượng phần) và `degPerSegment` (góc của mỗi phần).\n    *   `segmentColors`: Mảng màu dùng để tạo `conic-gradient`.\n    *   `generateConicGradient()`: Tạo chuỗi CSS cho `conic-gradient` dựa trên số lượng phần thưởng và màu sắc, sau đó áp dụng cho background của `.wheel`.\n    *   `addSegmentText()`: Duyệt qua mảng `prizes`, tạo các `div.segment-text`, tính toán góc quay cho từng text (để nó nằm ở giữa phần của nó), và thêm chúng vào trong element `.wheel`.\n    *   `spinWheel()`:\n        *   Kiểm tra xem vòng quay có đang quay không để tránh quay lại.\n        *   Chọn ngẫu nhiên một `randomIndex`.\n        *   Tính toán `targetAngle`: Góc quay cuối cùng cần thiết để đưa phần thưởng được chọn dừng lại dưới con trỏ. Công thức tính toán đảm bảo nó dừng trong phạm vi của phần thưởng đó, thường là gần trung tâm.\n        *   `minSpins * 360`: Thêm số vòng quay tối thiểu để tạo hiệu ứng quay nhiều vòng.\n        *   `totalRotation`: Lưu trữ tổng góc quay tích lũy (để mỗi lần quay tiếp theo sẽ tiếp tục từ vị trí cuối cùng).\n        *   Áp dụng `transform: rotate(...)` cho element `.wheel`. CSS transition sẽ lo việc tạo animation.\n        *   Lưu `randomIndex` vào `dataset` của wheel để có thể truy cập trong sự kiện `transitionend`.\n    *   Sự kiện `transitionend`: Lắng nghe khi animation quay hoàn thành.\n        *   Đặt lại cờ `spinning` và trạng thái nút.\n        *   Lấy `winningIndex` từ `dataset` đã lưu và hiển thị kết quả.\n    *   Gắn sự kiện `click` cho nút \"Quay!\".\n    *   Gọi `generateConicGradient()` và `addSegmentText()` khi script tải để thiết lập vòng quay ban đầu.\n\nBây giờ bạn có thể chạy tệp HTML này trong trình duyệt để xem và chơi game vòng quay may mắn của mình!"
                    }
                ],
                "role": "model"
            },
            "finishReason": "STOP",
            "index": 0
        }
    ],
    "usageMetadata": {
        "promptTokenCount": 22,
        "candidatesTokenCount": 3484,
        "totalTokenCount": 10730,
        "promptTokensDetails": [
            {
                "modality": "TEXT",
                "tokenCount": 22
            }
        ],
        "thoughtsTokenCount": 7224
    },
    "modelVersion": "models/gemini-2.5-flash-preview-04-17",
    "responseId": "0Rw8aI29BZa__uMP667vkQM"
}